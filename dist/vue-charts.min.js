/*!
 * vue-charts v0.2.1
 * (c) 2018 Hayden Bickerton
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],e):t.VueCharts=e(t._)}(this,function(t){"use strict";function e(){var t=null,e=null;return{promise:new Promise(function(a,r){t=a,e=r}),resolve:t,reject:e}}function a(t,e,a){for(var r in a){var n=r,o=a[r];"ready"===n?o():google.visualization.events.addListener(e,n,o)}}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["corechart"],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"current",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"en";if(!Array.isArray(t))throw new TypeError("packages must be an array");if("current"!==e&&"number"!=typeof e&&"upcoming"!==e)throw new TypeError('version must be a number, "upcoming" or "current"');if(i||u)return s.promise;i=!0;var n=document.createElement("script");return n.setAttribute("src","https://www.gstatic.com/charts/loader.js"),n.onreadystatechange=n.onload=function(){var n={packages:t,language:r};a&&(n.mapsApiKey=a),google.charts.load(e,n),google.charts.setOnLoadCallback(function(){i=!1,u=!0,s.resolve()})},document.getElementsByTagName("head")[0].appendChild(n),s.promise}function n(e,a){t.each(a,function(a,r){var n=a.type;e.$watch(r,function(){e.drawChart()},{deep:t.isObject(n)})})}function o(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.component("vue-chart",d)}t="default"in t?t.default:t;var i=!1,u=!1,s=e(),c=e(),l={packages:{type:Array,default:function(){return["corechart"]}},version:{default:"current"},mapsApiKey:{default:!1},language:{type:String,default:"en"},chartType:{type:String,default:function(){return"LineChart"}},chartEvents:{type:Object,default:function(){return{}}},columns:{required:!0,type:Array},rows:{type:Array,default:function(){return[]}},formatters:{type:Array,default:function(){return[]}},options:{type:Object,default:function(){return{chart:{title:"Chart Title",subtitle:"Subtitle"},hAxis:{title:"X Label"},vAxis:{title:"Y Label"},width:"400px",height:"300px",animation:{duration:500,easing:"out"}}}}},d={name:"vue-chart",props:l,render:function(t){return t("div",{class:"vue-chart-container"},[t("div",{attrs:{id:this.chartId,class:"vue-chart"}})])},data:function(){return{chart:null,chartId:"X"+this._uid,wrapper:null,dataTable:[],hiddenColumns:[]}},events:{redrawChart:function(){this.drawChart()}},watch:{chart:function(t,e){null===e&&a(this,this.chart,this.chartEvents)}},mounted:function(){var t=this;r(t.packages,t.version,t.mapsApiKey,t.language).then(t.drawChart).then(function(){var e=l;delete e.bounds,n(t,e),a(t,t.chart,t.chartEvents)}).catch(function(t){throw t})},methods:{buildDataTable:function(){var e=this,a=new google.visualization.DataTable;return t.each(e.columns,function(t){a.addColumn(t)}),t.isEmpty(e.rows)||a.addRows(e.rows),t.forEach(e.formatters,function(t,e){t&&t.type&&t.params&&new window.google.visualization[t.type](t.params).format(a,parseInt(e))}),a},updateDataTable:function(){var e=this;e.dataTable.removeRows(0,e.dataTable.getNumberOfRows()),e.dataTable.removeColumns(0,e.dataTable.getNumberOfColumns()),t.each(e.columns,function(t){e.dataTable.addColumn(t)}),t.isEmpty(e.rows)||e.dataTable.addRows(e.rows)},buildWrapper:function(t,e,a,r){return new google.visualization.ChartWrapper({chartType:t,dataTable:e,options:a,containerId:r})},buildChart:function(){var e=this,a=t.isEmpty(e.dataTable)?e.buildDataTable():e.dataTable;e.wrapper=e.buildWrapper(e.chartType,a,e.options,e.chartId),e.dataTable=e.wrapper.getDataTable(),google.visualization.events.addOneTimeListener(e.wrapper,"ready",function(){e.chart=e.wrapper.getChart(),c.resolve()})},drawChart:function(){var e=this;if((t.isEmpty(e.rows)||t.isObjectLike(e.rows))&&!t.isEmpty(e.columns))return t.isNull(e.chart)?e.buildChart():e.updateDataTable(),e.wrapper.draw(),c.promise}}};return o});